---
import { useSanityClient } from '@sanity/astro'
import { countryList } from '../lib/queries.js'

const data = await useSanityClient().fetch(countryList)
const countries = data.filter(x => x.menu)
---

<section class="widget widget-countries">
  <h3 class="widget-title">Countries</h3>
  <ul class="cat-links">
    {countries && countries.map(country => (
      <li>
        <a class="pill" href={`/country/${country.slug.current}`}>{country.name}</a>
      </li>
    ))}
  </ul>
</section>