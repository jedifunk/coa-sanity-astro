---
import { useSanityClient } from '@sanity/astro'
import { recentPosts } from '../lib/queries.js'

const posts = await useSanityClient().fetch(recentPosts)
---

<section class="widget recent-articles">
  <h3 class="widget-title">Recent Articles</h3>
  <ul>
    {posts && posts.map(post => (
    <li>
      <a href={`/${post.slug.current}`}>{post.title}</a>
    </li>
    ))}
  </ul>
</section>